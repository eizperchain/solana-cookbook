<!DOCTYPE html>
<html lang="th-TH">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="title" content="คู่มือ Solana | การใช้ React Native กับ Solana"><meta name="og:title" content="คู่มือ Solana | การใช้ React Native กับ Solana"><meta name="description" content="ใน tutorial นี้เราจะได้เรียนรู้วิธีใช้ Solana บน React Native apps."><meta name="og:description" content="ใน tutorial นี้เราจะได้เรียนรู้วิธีใช้ Solana บน React Native apps."><meta name="og:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="og:image:alt" content="Solana splash card"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@solanacookbook"><meta name="twitter:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="robots" content="index,follow,noodp"><meta name="googlebot" content="index,follow"><link rel="icon" href="/solana_cookbook_lightmode.svg"><script data-domain="solanacookbook.com" src="https://plausible.io/js/plausible.js"></script><title>React Native | คู่มือ Solana</title>
    <link rel="modulepreload" href="/assets/app.28f6b3e6.js"><link rel="modulepreload" href="/assets/react-native.html.585666c2.js"><link rel="modulepreload" href="/assets/react-native.html.0f5cf815.js">
    <link rel="stylesheet" href="/assets/style.fecd2c41.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/th/" class=""><!----><span class="site-name can-hide">คู่มือ Solana</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="ร่วมกันเขียน"><!--[--><!--]--> ร่วมกันเขียน <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/th/integrations" class="router-link-active" aria-label="การใช้งาน"><!--[--><!--]--> การใช้งาน <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/integrations/react-native.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/" class="" aria-label="中文"><!--[--><!--]--> 中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/integrations/react-native.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/th/integrations/react-native.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/integrations/react-native.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="ร่วมกันเขียน"><!--[--><!--]--> ร่วมกันเขียน <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/th/integrations" class="router-link-active" aria-label="การใช้งาน"><!--[--><!--]--> การใช้งาน <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/integrations/react-native.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/" class="" aria-label="中文"><!--[--><!--]--> 中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/integrations/react-native.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/th/integrations/react-native.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/integrations/react-native.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">การใช้งาน <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/th/integrations" class="router-link-active sidebar-item" aria-label="เริ่มต้น"><!--[--><!--]--> เริ่มต้น <!--[--><!--]--></a><!----></li><li><a href="/th/integrations/serum.html" class="sidebar-item" aria-label="Serum"><!--[--><!--]--> Serum <!--[--><!--]--></a><!----></li><li><a href="/th/integrations/pyth.html" class="sidebar-item" aria-label="Pyth"><!--[--><!--]--> Pyth <!--[--><!--]--></a><!----></li><li><a href="/th/integrations/switchboard.html" class="sidebar-item" aria-label="Switchboard"><!--[--><!--]--> Switchboard <!--[--><!--]--></a><!----></li><li><a href="/th/integrations/mango.html" class="sidebar-item" aria-label="Mango Markets"><!--[--><!--]--> Mango Markets <!--[--><!--]--></a><!----></li><li><a href="/th/integrations/strata.html" class="sidebar-item" aria-label="Strata"><!--[--><!--]--> Strata <!--[--><!--]--></a><!----></li><li><a href="/th/integrations/web3auth.html" class="sidebar-item" aria-label="web3Auth (Torus Wallet)"><!--[--><!--]--> web3Auth (Torus Wallet) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="React Native"><!--[--><!--]--> React Native <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/th/integrations/react-native.html#วิธีใช้-solana-web3-js-ใน-react-native-app" class="router-link-active router-link-exact-active sidebar-item" aria-label="วิธีใช้ @solana/web3.js ใน React Native app"><!--[--><!--]--> วิธีใช้ @solana/web3.js ใน React Native app <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/th/integrations/react-native.html#สร้าง-app-ใหม่" class="router-link-active router-link-exact-active sidebar-item" aria-label="สร้าง app ใหม่"><!--[--><!--]--> สร้าง app ใหม่ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#ติดตั้ง-dependencies" class="router-link-active router-link-exact-active sidebar-item" aria-label="ติดตั้ง dependencies"><!--[--><!--]--> ติดตั้ง dependencies <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#update-index-js" class="router-link-active router-link-exact-active sidebar-item" aria-label="Update index.js"><!--[--><!--]--> Update index.js <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#update-metro-config-js" class="router-link-active router-link-exact-active sidebar-item" aria-label="Update metro.config.js"><!--[--><!--]--> Update metro.config.js <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#update-app-tsx" class="router-link-active router-link-exact-active sidebar-item" aria-label="Update App.tsx"><!--[--><!--]--> Update App.tsx <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#ติดตั้ง-cocoapods" class="router-link-active router-link-exact-active sidebar-item" aria-label="ติดตั้ง cocoapods"><!--[--><!--]--> ติดตั้ง cocoapods <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#start-application" class="router-link-active router-link-exact-active sidebar-item" aria-label="Start application"><!--[--><!--]--> Start application <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/th/integrations/react-native.html#solana-dapp-scaffold-สําหรับ-react-native" class="router-link-active router-link-exact-active sidebar-item" aria-label="Solana DApp Scaffold สำหรับ React Native"><!--[--><!--]--> Solana DApp Scaffold สำหรับ React Native <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#ปัญหาที่เจอบ่อยเมื่อใช้-solana-web3-js-กับ-react-native-app" class="router-link-active router-link-exact-active sidebar-item" aria-label="ปัญหาที่เจอบ่อยเมื่อใช้ @solana/web3.js กับ React Native app"><!--[--><!--]--> ปัญหาที่เจอบ่อยเมื่อใช้ @solana/web3.js กับ React Native app <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/th/integrations/react-native.html#error-while-trying-to-resolve-module-superstruct-from-file" class="router-link-active router-link-exact-active sidebar-item" aria-label="Error: While trying to resolve module superstruct from file"><!--[--><!--]--> Error: While trying to resolve module superstruct from file <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#error-url-protocol-is-not-implemented" class="router-link-active router-link-exact-active sidebar-item" aria-label="Error: URL.protocol is not implemented"><!--[--><!--]--> Error: URL.protocol is not implemented <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/th/integrations/react-native.html#error-crypto-getrandomvalues-not-supported" class="router-link-active router-link-exact-active sidebar-item" aria-label="Error: crypto.getRandomValues() not supported"><!--[--><!--]--> Error: crypto.getRandomValues() not supported <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/th/integrations/jupiter.html" class="sidebar-item" aria-label="Jupiter"><!--[--><!--]--> Jupiter <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="react-native-และ-solana" tabindex="-1"><a class="header-anchor" href="#react-native-และ-solana" aria-hidden="true">#</a> React Native และ Solana</h1><p>React Native เป็น open-source UI software framework ใช้สำหรับ dev mobile, web และ desktop applications โดยนักพัฒนาจะสามารถใช้ React framework กับ native platform capabilities ได้ และการใช้กับ Solana SDK จะเป็น platform ที่ดีในการสร้าง native Crypto apps.</p><p>ทางที่เร็วที่สุดในการที่จะเริ่มต้นกับ React Native และ Solana คือการใช้ <a href="#solana-dapp-scaffold-for-react-native">Solana DApp Scaffold สำหรับ React Native</a>.</p><h2 id="วิธีใช้-solana-web3-js-ใน-react-native-app" tabindex="-1"><a class="header-anchor" href="#วิธีใช้-solana-web3-js-ใน-react-native-app" aria-hidden="true">#</a> วิธีใช้ @solana/web3.js ใน React Native app</h2><p>ในตัวอย่างนี้เราจะได้เรียนรู้วิธีการสร้าง React Native app, การติดตั้ง และ configure <code>@solana/web3.js</code> SDK, และ dependencies ต่างๆ</p><p>ถ้าเรามี app แล้วให้ข้ามไปที่ <a href="#install-dependencies">การติดตั้ง dependencies</a>.</p><h3 id="สร้าง-app-ใหม่" tabindex="-1"><a class="header-anchor" href="#สร้าง-app-ใหม่" aria-hidden="true">#</a> สร้าง app ใหม่</h3><p>เราจะเริ่มจากการสร้าง React Native app โดยใช้ TypeScript, แล้ว <code>cd</code> เข้าไปใน project directory, ที่ที่เราจะ execute commands ต่างๆ.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx react-native init SolanaReactNative --template react-native-template-typescript
<span class="token builtin class-name">cd</span> SolanaReactNative
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ติดตั้ง-dependencies" tabindex="-1"><a class="header-anchor" href="#ติดตั้ง-dependencies" aria-hidden="true">#</a> ติดตั้ง dependencies</h3><p>ต่อไปเราจะติดตั้ง dependencies. เมื่อเราติดตั้ง Solana SDK, และนอกจากน้ีเรายังจะติดตั้ง package เพื่อ patch <code>metro</code> configuration, และ polyfills 2 ตัวที่เอาไว้ patch ในส่วนของ React Native environment.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> @solana/web3.js metro-config react-native-get-random-values react-native-url-polyfill
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="update-index-js" tabindex="-1"><a class="header-anchor" href="#update-index-js" aria-hidden="true">#</a> Update <code>index.js</code></h3><p>เพื่อ load polyfills, เราจะเปิด file <code>index.js</code> ที่ root ของ project และเพิ่ม 2 บรรทัดนี้เข้าไปที่ 2 บรรทัดแรกของ file:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;react-native-get-random-values&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;react-native-url-polyfill/auto&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="update-metro-config-js" tabindex="-1"><a class="header-anchor" href="#update-metro-config-js" aria-hidden="true">#</a> Update <code>metro.config.js</code></h3><p>ในขั้นตอนนี้, เราจะเปลี่ยน <code>metro</code> configuration, มันจะได้ load files ที่มีนามสกุล <code>cjs</code>.</p><p>เปิด file <code>metro.config.js</code> ที่ root ของ project ของเราและแทนที่ด้วย snippet ด้านล่างนี้:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>getDefaultConfig<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;metro-config&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token punctuation">{</span>sourceExts<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDefaultConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transformer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">getTransformOptions</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">experimentalImportSupport</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">inlineRequires</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sourceExts</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>sourceExts<span class="token punctuation">,</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;svg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="update-app-tsx" tabindex="-1"><a class="header-anchor" href="#update-app-tsx" aria-hidden="true">#</a> Update <code>App.tsx</code></h3><p>มาเพิ่มตัวอย่าง web3.js ใส่ใน app ของเรากันดีกว่า!</p><p>เปิด file <code>App.tsx</code> และเพิ่ม code นี้เข้าไปใน function<code>App</code>:</p><p>ในตัวอย่างนี้, เราจะติดตั้ง connection ไปที่ Solana Devnet และเมื่อ components load แล้วเราจะลองหา version ของ cluster ที่เราต่อด้วยและ เก็บ version นั้นไว้ใน component state.</p><p>นอกจากนี้, ในตัวอย่างนี้เราจะแสดงวิธี generate และเก็บ keypair.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&#39;devnet&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>version<span class="token punctuation">,</span> setVersion<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>keypair<span class="token punctuation">,</span> setKeypair<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Keypair<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">randomKeypair</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setKeypair</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>version<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  conn<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> <span class="token function">setVersion</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>version<span class="token punctuation">,</span> setVersion<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Lastly, in the template (or <code>render function</code>) add the following markup:</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token punctuation">{</span>version <span class="token operator">?</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Section</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Version<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>version<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Section</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>keypair <span class="token operator">?</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Section</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Keypair<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>keypair<span class="token operator">?.</span>publicKey<span class="token operator">?.</span><span class="token function">toBase58</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Section</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>New Keypair<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>randomKeypair<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ติดตั้ง-cocoapods" tabindex="-1"><a class="header-anchor" href="#ติดตั้ง-cocoapods" aria-hidden="true">#</a> ติดตั้ง cocoapods</h3><p>ในการทำให้ polyfills ทำงานเราต้องติดตั้ง <code>cocoapods</code> ด้วย</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ios <span class="token operator">&amp;&amp;</span> pod <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="start-application" tabindex="-1"><a class="header-anchor" href="#start-application" aria-hidden="true">#</a> Start application</h3><p>เมื่อเราติดตั้งแล้วเราจะสามารถ start app เราได้แล้ว</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx react-native run-ios
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ถ้าไม่ติดอะไรเราจะเห็น React Native app เริ่มทำงานบน iOS simulator และได้รับเลข version ของ Solana Devnet.</p><h2 id="solana-dapp-scaffold-สําหรับ-react-native" tabindex="-1"><a class="header-anchor" href="#solana-dapp-scaffold-สําหรับ-react-native" aria-hidden="true">#</a> Solana DApp Scaffold สำหรับ React Native</h2><p>ถ้าเราต้องการเริ่มจาก Scaffold เราสามารถ download ได้ที่ <a href="https://github.com/solana-developers/dapp-scaffold-react-native" target="_blank" rel="noopener noreferrer">Solana DApp Scaffold for React Native<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="ปัญหาที่เจอบ่อยเมื่อใช้-solana-web3-js-กับ-react-native-app" tabindex="-1"><a class="header-anchor" href="#ปัญหาที่เจอบ่อยเมื่อใช้-solana-web3-js-กับ-react-native-app" aria-hidden="true">#</a> ปัญหาที่เจอบ่อยเมื่อใช้ @solana/web3.js กับ React Native app</h2><h3 id="error-while-trying-to-resolve-module-superstruct-from-file" tabindex="-1"><a class="header-anchor" href="#error-while-trying-to-resolve-module-superstruct-from-file" aria-hidden="true">#</a> Error: While trying to resolve module superstruct from file</h3><blockquote><p>error: Error: While trying to resolve module superstruct from file .../SolanaReactNative/node_modules/@solana/web3.js/lib/index.browser.cjs.js, the package .../SolanaReactNative/node_modules/superstruct/package.json was successfully found. However, this package itself specifies a main module field that could not be resolved (.../SolanaReactNative/node_modules/superstruct/lib/index.cjs.</p></blockquote><p>ปัญหานี้เกิดจาก <code>metro</code>, React Native bundler ไม่รู้จักนามสกุล <code>cjs</code> อ้างถึง <a href="https://github.com/facebook/metro/issues/535" target="_blank" rel="noopener noreferrer">open issue นี้<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>เราสามารถแก้ปัญหานี้ได้โดบการแก้ <code>metro.config.js</code> โดยเพิ่ม <code>cjs</code> ใน<code>resolver.sourceExts</code> array ตามนี่บอกไปแล้ว</p><h3 id="error-url-protocol-is-not-implemented" tabindex="-1"><a class="header-anchor" href="#error-url-protocol-is-not-implemented" aria-hidden="true">#</a> Error: URL.protocol is not implemented</h3><pre><code>ERROR Error: URL.protocol is not implemented 
ERROR Invariant Violation: Module AppRegistry is not a registered callable module (calling runApplication). A frequent cause of the error is that the application entry file path is incorrect. This สามารถ also happen when the JS bundle is corrupt or there is an early initialization error when loading React Native. 
</code></pre><p>ปัญหานี้สามารถแก้ได้โดยใช้ polyfill สำหรับ <code>URL</code> object ใน React Native.</p><p>ติดตั้ง package <code>react-native-url-polyfill</code> และ import มันใน file ของ app (เช่น: <code>index.js</code>), เหมือนที่เคยแสดงไว้ก่อนหน้านี้</p><h3 id="error-crypto-getrandomvalues-not-supported" tabindex="-1"><a class="header-anchor" href="#error-crypto-getrandomvalues-not-supported" aria-hidden="true">#</a> Error: crypto.getRandomValues() not supported</h3><pre><code>Error: crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported
</code></pre><p>ปัญหานี้สามารถแก้ได้โดยใช้ polyfill สำหรับ <code>crypto</code> object ใน React Native.</p><p>ติดตั้ง package <code>react-native-get-random-values</code> และ import มันใน file ของ app (เช่น: <code>index.js</code>), เหมือนที่เคยแสดงไว้ก่อนหน้านี้</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/th/integrations/web3auth.html" class="" aria-label="web3Auth (Torus Wallet)"><!--[--><!--]--> web3Auth (Torus Wallet) <!--[--><!--]--></a></span><span class="next"><a href="/th/integrations/jupiter.html" class="" aria-label="Jupiter"><!--[--><!--]--> Jupiter <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.28f6b3e6.js" defer></script>
  </body>
</html>
