import{_ as p,r as o,o as c,c as l,a as n,b as e,F as i,e as t,d as a}from"./app.28f6b3e6.js";const r={},u=t(`<h1 id="react-native-and-solana" tabindex="-1"><a class="header-anchor" href="#react-native-and-solana" aria-hidden="true">#</a> React Native and Solana</h1><p>React Native is an open-source UI software framework used to develop mobile, web and desktop applications by enabling developers to use the React framework along with native platform capabilities. Powered with the Solana SDK, this is a great platform to quickly build performant native Crypto apps.</p><p>The fastest way to start with React Native and Solana is by using the <a href="#solana-dapp-scaffold-for-react-native">Solana DApp Scaffold for React Native</a>.</p><h2 id="how-to-use-solana-web3-js-in-a-react-native-app" tabindex="-1"><a class="header-anchor" href="#how-to-use-solana-web3-js-in-a-react-native-app" aria-hidden="true">#</a> How to use @solana/web3.js in a React Native app</h2><p>In this tutorial you will learn how to create a new React Native app and install and configure the <code>@solana/web3.js</code> SDK, and its dependencies.</p><p>If you already have an existing app, skip to <a href="#install-dependencies">installing the dependencies</a>.</p><h3 id="create-a-new-app" tabindex="-1"><a class="header-anchor" href="#create-a-new-app" aria-hidden="true">#</a> Create a new app</h3><p>We start a new React Native application that uses TypeScript, then <code>cd</code> into the project directory, where we will execute the rest of the commands.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx react-native init SolanaReactNative --template react-native-template-typescript
<span class="token builtin class-name">cd</span> SolanaReactNative
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="install-dependencies" tabindex="-1"><a class="header-anchor" href="#install-dependencies" aria-hidden="true">#</a> Install dependencies</h3><p>Next, we install the dependencies. We install the Solana SDK, and in addition we install a package to patch the <code>metro</code> configuration, and two polyfills that patch the React Native environment.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> @solana/web3.js metro-config react-native-get-random-values react-native-url-polyfill
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="update-index-js" tabindex="-1"><a class="header-anchor" href="#update-index-js" aria-hidden="true">#</a> Update <code>index.js</code></h3><p>To load the polyfills, we open the file <code>index.js</code> in the root of the project and add the following two lines to the top of the file:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;react-native-get-random-values&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;react-native-url-polyfill/auto&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="update-metro-config-js" tabindex="-1"><a class="header-anchor" href="#update-metro-config-js" aria-hidden="true">#</a> Update <code>metro.config.js</code></h3><p>In this step, we will configure the <code>metro</code> configuration, so it will load files with the <code>cjs</code> extension.</p><p>Open the file <code>metro.config.js</code> in the root of your project and replace the content with the snippet below:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>getDefaultConfig<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;metro-config&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token punctuation">{</span>sourceExts<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDefaultConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transformer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">getTransformOptions</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">experimentalImportSupport</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">inlineRequires</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sourceExts</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>sourceExts<span class="token punctuation">,</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;svg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="update-app-tsx" tabindex="-1"><a class="header-anchor" href="#update-app-tsx" aria-hidden="true">#</a> Update <code>App.tsx</code></h3><p>Let&#39;s add a web3.js example into our app!</p><p>Open the file <code>App.tsx</code> and add the following code inside the <code>App</code> function:</p><p>In this example, we set up a connection to Solana Devnet and when the components load, we get the version of the cluster we connected to and store the version in the component state.</p><p>Additionally, this example shows how to generate and store a keypair.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&#39;devnet&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>version<span class="token punctuation">,</span> setVersion<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>keypair<span class="token punctuation">,</span> setKeypair<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Keypair<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">randomKeypair</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setKeypair</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>version<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  conn<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> <span class="token function">setVersion</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>version<span class="token punctuation">,</span> setVersion<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Lastly, in the template (or <code>render function</code>) add the following markup:</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token punctuation">{</span>version <span class="token operator">?</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Section</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Version<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>version<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Section</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>keypair <span class="token operator">?</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Section</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Keypair<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>keypair<span class="token operator">?.</span>publicKey<span class="token operator">?.</span><span class="token function">toBase58</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Section</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>New Keypair<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>randomKeypair<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="install-cocoapods" tabindex="-1"><a class="header-anchor" href="#install-cocoapods" aria-hidden="true">#</a> Install cocoapods</h3><p>In order for our polyfills to work, we need to install the <code>cocoapods</code>.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ios <span class="token operator">&amp;&amp;</span> pod <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="start-application" tabindex="-1"><a class="header-anchor" href="#start-application" aria-hidden="true">#</a> Start application</h3><p>Once we finished all the above, we can start our application</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx react-native run-ios
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>If all went well, you should see a React Native app being started in your iOS simulator that retrieves the version of the Solana Devnet.</p><h2 id="solana-dapp-scaffold-for-react-native" tabindex="-1"><a class="header-anchor" href="#solana-dapp-scaffold-for-react-native" aria-hidden="true">#</a> Solana DApp Scaffold for React Native</h2>`,35),d=a("If you want to hit the ground running, you can download the "),k={href:"https://github.com/solana-developers/dapp-scaffold-react-native",target:"_blank",rel:"noopener noreferrer"},h=a("Solana DApp Scaffold for React Native"),b=a("."),m=n("h2",{id:"common-issues-when-using-solana-web3-js-in-a-react-native-app",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#common-issues-when-using-solana-web3-js-in-a-react-native-app","aria-hidden":"true"},"#"),a(" Common issues when using @solana/web3.js in a React Native app")],-1),f=n("h3",{id:"error-while-trying-to-resolve-module-superstruct-from-file",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#error-while-trying-to-resolve-module-superstruct-from-file","aria-hidden":"true"},"#"),a(" Error: While trying to resolve module superstruct from file")],-1),g=n("blockquote",null,[n("p",null,"error: Error: While trying to resolve module superstruct from file .../SolanaReactNative/node_modules/@solana/web3.js/lib/index.browser.cjs.js, the package .../SolanaReactNative/node_modules/superstruct/package.json was successfully found. However, this package itself specifies a main module field that could not be resolved (.../SolanaReactNative/node_modules/superstruct/lib/index.cjs.")],-1),v=a("This is an issue because "),y=n("code",null,"metro",-1),w=a(", the React Native bundler, does not support the "),x=n("code",null,"cjs",-1),_=a(" extension by default. There is an "),j={href:"https://github.com/facebook/metro/issues/535",target:"_blank",rel:"noopener noreferrer"},R=a("open issue here"),S=a("."),N=t(`<p>You can fix this by updating <code>metro.config.js</code> and add <code>cjs</code> to the <code>resolver.sourceExts</code> array, as shown above.</p><h3 id="error-url-protocol-is-not-implemented" tabindex="-1"><a class="header-anchor" href="#error-url-protocol-is-not-implemented" aria-hidden="true">#</a> Error: URL.protocol is not implemented</h3><pre><code>ERROR Error: URL.protocol is not implemented 
ERROR Invariant Violation: Module AppRegistry is not a registered callable module (calling runApplication). A frequent cause of the error is that the application entry file path is incorrect. This can also happen when the JS bundle is corrupt or there is an early initialization error when loading React Native. 
</code></pre><p>This is an issue that can be fixed by using a polyfill for the <code>URL</code> object in React Native.</p><p>Install the package <code>react-native-url-polyfill</code> and import it in the main file of your app (eg: <code>index.js</code>), as shown above.</p><h3 id="error-crypto-getrandomvalues-not-supported" tabindex="-1"><a class="header-anchor" href="#error-crypto-getrandomvalues-not-supported" aria-hidden="true">#</a> Error: crypto.getRandomValues() not supported</h3><pre><code>Error: crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported
</code></pre><p>This is an issue that can be fixed by using a polyfill for the <code>crypto</code> object in React Native.</p><p>Install the package <code>react-native-get-random-values</code> and import it in the main file of your app (eg: <code>index.js</code>), as shown above.</p>`,9);function E(I,q){const s=o("ExternalLinkIcon");return c(),l(i,null,[u,n("p",null,[d,n("a",k,[h,e(s)]),b]),m,f,g,n("p",null,[v,y,w,x,_,n("a",j,[R,e(s)]),S]),N],64)}var V=p(r,[["render",E]]);export{V as default};
